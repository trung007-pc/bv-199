@page "/bv-199/part-review"
@layout ClientLayout
@using WebClient.Service.PartReviews
@using ButtonType = Radzen.ButtonType
@inherits BaseBlazorPage
@inject PartReviewService _partReviewService;
@inject PartService _partService;
@inject UploadService _uploadService;
@inject DialogService DialogService

@using Contract.PartReviews;
@using Microsoft.EntityFrameworkCore.Storage
@using WebClient.Service.Parts
@using WebClient.Service.Upload
@using Orientation = Radzen.Orientation




<div style="margin: 0 auto;width: 100%;max-width: 500px;height: 357px;">
    <RadzenImage Path="Images/Logo/Logo_BenhVien199.png" Style="width: 100%;height: 100%"/>
</div>

<h1 style="text-align: center;color:gold" class="animate-text">Đánh Giá Hài Lòng Người Bệnh</h1>
<br/>


<div>
    <RadzenDataList WrapItems="true" AllowPaging="true" Data="@ReviewsWithNav" TItem="ReviewWithNavPropertiesModel" PageSize="20" PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true">
       
        <Template Context="data">
            <RadzenCard Style="flex-basis: 400px;flex-grow: 0">
                <Row>
                    <Column ColumnSize="ColumnSize.Is3.OnDesktop.Is4.OnMobile" Style="height:150px;padding: 5px">
                        <RadzenImage Path=@data.ImageUrl Style="width:100%;height: 100%;object-fit: contain;border-radius: 5%"/>
                    </Column>
                    <Column ColumnSize="ColumnSize.Is9.OnDesktop.Is8.OnMobile" Style="display: flex;flex-direction:column;justify-content: center">
                        <div>
                            <RadzenBadge  Text="@data.Name" Style="color:#ffffff;font-size:1.3rem;background-color: #0eb1ae;" />
                        </div>
                        <div>
                            <Rating MaxValue="5" @bind-SelectedValue="data.Rating" Style="color: gold;font-size: 1.3rem"/>
                        </div>
                    </Column>
                </Row>
            </RadzenCard>
    
        </Template>
      
    </RadzenDataList>
</div>

<div style="display: flex;justify-content: center">
    <RadzenButton Click="async () => { await CreatePartReviewsWithDetail(); }" ButtonStyle="ButtonStyle.Info" Text="Đánh Giá" Icon="rate_review" Size="ButtonSize.Large" Style="background-color: #0eb1ae"/>
</div>





@code{
    string Name { get; set; }
    string fileName;
    long? fileSize;

    async Task ShowInlineDialog()
    {
        var result = await DialogService.OpenAsync("Bạn có muốn góp ý kiến vào các bộ phận?", ds =>
            
            @<div style="overflow: hidden">
                <div style="height:275px">
                    <RadzenImage Path="Images/Logo/online-review-feature-image-1024x640.png" Style="width: 100%;height: 100%"/>
                </div>
                <h3>Bạn có muốn góp ý kiến vào các bộ phận?</h3>
                <RadzenTextArea Placeholder="Nhập vào đây..." @bind-Value="ReviewNote" Rows="10" Cols="30" Class="w-100"/>
                <RZInputFile Event="async (e) => {await  OnChangeFileAtNewModal(e); }"></RZInputFile>
                <div class="row" style="float: right">
                    <div class="col">
                        <RadzenButton Text="Ok" Click="async () => await HideDiaLog(ds)" Class="me-1" Style="width: 80px;"/>
                        <RadzenButton Text="Cancel" Click="() => ds.Close(false)" ButtonStyle="ButtonStyle.Light" Class="me-1"/>
                    </div>
                </div>
            </div>,new DialogOptions(){Width = "70vw",Style = "",ShowTitle = false});
    }

    void OnChange(string value, string name)
    {
      
    }

    void OnError(UploadErrorEventArgs args, string name)
    {
     
    }

}